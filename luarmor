-- CONFIG
local SCRIPT_KEY = getgenv().script_key  -- set this before running
local LOADER_URL = "https://raw.githubusercontent.com/Ambriser/yurr/refs/heads/main/luarmor"

-- UTILS
local function trim(s)
    return (s or ""):match("^%s*(.-)%s*$")
end

-- LUARMOR LOADER
local function loadHub(key)
    key = trim(key)
    if not key or #key ~= 32 then
        warn("Invalid or missing key. Cannot load hub.")
        return false
    end

    getgenv().script_key = key
    loadstring(game:HttpGet(LOADER_URL))()
    return true
end

-- BOOT
if SCRIPT_KEY then
    loadHub(SCRIPT_KEY)  -- pre-set key â†’ skip UI
else
    -- fallback to UI if no key provided
    local Rayfield = loadstring(game:HttpGet(
        "https://raw.githubusercontent.com/LawlietSHub/Library/refs/heads/main/customFluent"
    ))()

    local Window = Rayfield:CreateWindow({
        Name = "L Hub! Key Loader",
        LoadingTitle = "Enter Key",
        LoadingSubtitle = "by L",
        ToggleUIKeybind = "L",
    })

    local KeyTab = Window:CreateTab("Key System")
    local UserKey = ""

    KeyTab:CreateButton({
        Name = "Get Key",
        Callback = function()
            setclipboard("https://ads.luarmor.net/get_key?for=-LnDzsGFTqXOu")
        end
    })

    KeyTab:CreateInput({
        Name = "Enter Key",
        PlaceholderText = "Paste your 32-char key here",
        Callback = function(text)
            UserKey = trim(text)
        end
    })

    KeyTab:CreateButton({
        Name = "Verify Key",
        Callback = function()
            if UserKey == "" then return end
            SCRIPT_KEY = UserKey
            loadHub(SCRIPT_KEY)  -- load hub if valid
        end
    })
end

